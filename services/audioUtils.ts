export function decode(b:string){let s=atob(b),l=s.length,bytes=new Uint8Array(l);for(let i=0;i<l;i++)bytes[i]=s.charCodeAt(i);return bytes;} export function encode(b:Uint8Array){let r='';for(let i=0;i<b.length;i++)r+=String.fromCharCode(b[i]);return btoa(r);} export async function decodeAudioData(d:Uint8Array,ctx:AudioContext,sr:number,ch:number){let i16=new Int16Array(d.buffer),fc=i16.length/ch,buf=ctx.createBuffer(ch,fc,sr);for(let c=0;c<ch;c++){let cd=buf.getChannelData(c);for(let i=0;i<fc;i++)cd[i]=i16[i*ch+c]/32768.0;}return buf;} export function createBlob(d:Float32Array){let l=d.length,i16=new Int16Array(l);for(let i=0;i<l;i++)i16[i]=d[i]*32768;return {data:encode(new Uint8Array(i16.buffer)),mimeType:'audio/pcm;rate=16000'};}